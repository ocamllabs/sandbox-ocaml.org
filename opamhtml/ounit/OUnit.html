<div class="ocaml_toplevel_module"><div class="info">Unit test building blocks<div class="authors"><b>Author(s): </b><span class="author">Maas-Maarten Zeeman</span><span class="author">Sylvain Le Gall</span></div></div>
<div class="info"><div class="info"><h2 id="2_TITLE">Assertions</h2><p>    Assertions are the basic building blocks of unittests.</p></div></div>
<pre><span class="VALassert_failure"><span class="keyword">val</span> assert_failure</span> : <code class="type">string -&gt; 'a</code></pre><div class="info"><div class="info">Signals a failure. This will raise an exception with the specified
    string. <b>Raises</b> <code>Failure</code> signal a failure<br/></div></div>
<pre><span class="VALassert_bool"><span class="keyword">val</span> assert_bool</span> : <code class="type">string -&gt; bool -&gt; unit</code></pre><div class="info"><div class="info">Signals a failure when bool is false. The string identifies the
    failure. <b>Raises</b> <code>Failure</code> signal a failure<br/></div></div>
<pre><span class="VAL(@?)"><span class="keyword">val</span> (@?)</span> : <code class="type">string -&gt; bool -&gt; unit</code></pre><div class="info"><div class="info">Shorthand for assert_bool <b>Raises</b> <code>Failure</code> to signal a failure<br/></div></div>
<pre><span class="VALassert_string"><span class="keyword">val</span> assert_string</span> : <code class="type">string -&gt; unit</code></pre><div class="info"><div class="info">Signals a failure when the string is non-empty. The string identifies the
    failure. <b>Raises</b> <code>Failure</code> signal a failure<br/></div></div>
<pre><span class="VALassert_command"><span class="keyword">val</span> assert_command</span> : <code class="type">?exit_code:<a href="?package=ocaml&amp;module=Unix&amp;type=process_status">Unix.process_status</a> -&gt;
?sinput:char <a href="?package=ocaml&amp;module=Stream&amp;type=t">Stream.t</a> -&gt;
?foutput:(char <a href="?package=ocaml&amp;module=Stream&amp;type=t">Stream.t</a> -&gt; unit) -&gt;
?use_stderr:bool -&gt;
?env:string array -&gt; ?verbose:bool -&gt; string -&gt; string list -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">assert_command prg args</code> Run the command provided. <b>Since</b> 1.1.0<div class="parameters"><div class="param_info"><code class="code">exit_code</code> : expected exit code</div><div class="param_info"><code class="code">sinput</code> : provide this <code class="code">char Stream.t</code> as input of the process</div><div class="param_info"><code class="code">foutput</code> : run this function on output, it can contains an
                   <code class="code">assert_equal</code> to check it</div><div class="param_info"><code class="code">use_stderr</code> : redirect <code class="code">stderr</code> to <code class="code">stdout</code></div><div class="param_info"><code class="code">env</code> : Unix environment</div><div class="param_info"><code class="code">verbose</code> : if failed, dump stdout/stderr of the process to stderr</div></div></div></div>
<pre><span class="VALassert_equal"><span class="keyword">val</span> assert_equal</span> : <code class="type">?cmp:('a -&gt; 'a -&gt; bool) -&gt;
?printer:('a -&gt; string) -&gt;
?pp_diff:(<a href="?package=ocaml&amp;module=Format&amp;type=formatter">Format.formatter</a> -&gt; 'a * 'a -&gt; unit) -&gt;
?msg:string -&gt; 'a -&gt; 'a -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">assert_equal expected real</code> Compares two values, when they are not equal a
    failure is signaled.<div class="version">1.1.0</div><div class="parameters"><div class="param_info"><code class="code">cmp</code> : customize function to compare, default is <code class="code">=</code></div><div class="param_info"><code class="code">printer</code> : value printer, don't print value otherwise</div><div class="param_info"><code class="code">pp_diff</code> : if not equal, ask a custom display of the difference
                using <code class="code">diff fmt exp real</code> where <code class="code">fmt</code> is the formatter to use</div><div class="param_info"><code class="code">msg</code> : custom message to identify the failure</div></div> <b>Raises</b> <code>Failure</code> signal a failure<br/></div></div>
<pre><span class="VALassert_raises"><span class="keyword">val</span> assert_raises</span> : <code class="type">?msg:string -&gt; exn -&gt; (unit -&gt; 'a) -&gt; unit</code></pre><div class="info"><div class="info">Asserts if the expected exception was raised.<div class="parameters"><div class="param_info"><code class="code">msg</code> : identify the failure</div></div> <b>Raises</b> <code>Failure</code> description<br/></div></div>
<div class="info"><div class="info"><h2 id="2_TITLE">Skipping tests </h2><p>    In certain condition test can be written but there is no point running it,
    because they are not significant (missing OS features for example). In this
    case this is not a failure nor a success. Following functions allow you to
    escape test, just as assertion but without the same error status.</p><p>   A test skipped is counted as success. A test todo is counted as failure.</p></div></div>
<pre><span class="VALskip_if"><span class="keyword">val</span> skip_if</span> : <code class="type">bool -&gt; string -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">skip cond msg</code> If <code class="code">cond</code> is true, skip the test for the reason explain in
    <code class="code">msg</code>. For example <code class="code">skip_if (Sys.os_type = &quot;Win32&quot;) &quot;Test a doesn't run on
    windows&quot;</code>. <b>Since</b> 1.0.3</div></div>
<pre><span class="VALtodo"><span class="keyword">val</span> todo</span> : <code class="type">string -&gt; unit</code></pre><div class="info"><div class="info">The associated test is still to be done, for the reason given. <b>Since</b> 1.0.3</div></div>
<div class="info"><div class="info"><h2 id="2_TITLE">Compare Functions</h2></div></div>
<pre><span class="VALcmp_float"><span class="keyword">val</span> cmp_float</span> : <code class="type">?epsilon:float -&gt; float -&gt; float -&gt; bool</code></pre><div class="info"><div class="info">Compare floats up to a given relative error.<div class="parameters"><div class="param_info"><code class="code">epsilon</code> : if the difference is smaller <code class="code">epsilon</code> values are equal</div></div></div></div>
<div class="info"><div class="info"><h2 id="2_TITLE">Bracket</h2><p>    A bracket is a functional implementation of the commonly used
    setUp and tearDown feature in unittests. It can be used like this:</p><p>    <code class="code">&quot;MyTestCase&quot; &gt;:: (bracket test_set_up test_fun test_tear_down)</code></p></div></div>
<pre><span class="VALbracket"><span class="keyword">val</span> bracket</span> : <code class="type">(unit -&gt; 'a) -&gt; ('a -&gt; unit) -&gt; ('a -&gt; unit) -&gt; unit -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">bracket set_up test tear_down</code> The <code class="code">set_up</code> function runs first, then
    the <code class="code">test</code> function runs and at the end <code class="code">tear_down</code> runs. The
    <code class="code">tear_down</code> function runs even if the <code class="code">test</code> failed and help to clean
    the environment.</div></div>
<pre><span class="VALbracket_tmpfile"><span class="keyword">val</span> bracket_tmpfile</span> : <code class="type">?prefix:string -&gt;
?suffix:string -&gt;
?mode:<a href="?package=ocaml&amp;module=Pervasives&amp;type=open_flag">Pervasives.open_flag</a> list -&gt;
(string * <a href="?package=ocaml&amp;module=Pervasives&amp;type=out_channel">Pervasives.out_channel</a> -&gt; unit) -&gt; unit -&gt; unit</code></pre><div class="info"><div class="info"><code class="code">bracket_tmpfile test</code> The <code class="code">test</code> function takes a temporary filename
    and matching output channel as arguments. The temporary file is created
    before the test and removed after the test. <b>Since</b> 1.1.0<div class="parameters"><div class="param_info"><code class="code">prefix</code> : see <code class="code">Filename.open_temp_file</code></div><div class="param_info"><code class="code">suffix</code> : see <code class="code">Filename.open_temp_file</code></div><div class="param_info"><code class="code">mode</code> : see <code class="code">Filename.open_temp_file</code></div></div></div></div>
<div class="info"><div class="info"><h2 id="2_TITLE">Constructing Tests</h2></div></div>
<pre><span class="TYPEtest_fun"><span class="keyword">type</span> test_fun</span> = <code class="type">unit -&gt; unit</code></pre><div class="info"><div class="info">The type of test function</div></div>
<pre><code><span class="TYPEtest"><span class="keyword">type</span> test</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest.TestCase"><span class="constructor">TestCase</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=test_fun">test_fun</a></code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest.TestList"><span class="constructor">TestList</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> list</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest.TestLabel"><span class="constructor">TestLabel</span></span> <span class="keyword">of</span> <code class="type">string * <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a></code></code></td></tr></table><div class="info"><div class="info">The type of tests</div><div class="info">Create a TestLabel for a test</div></div>
<pre><span class="VAL(&gt;:)"><span class="keyword">val</span> (&gt;:)</span> : <code class="type">string -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a></code></pre>
<pre><span class="VAL(&gt;::)"><span class="keyword">val</span> (&gt;::)</span> : <code class="type">string -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test_fun">test_fun</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a></code></pre><div class="info"><div class="info">Create a TestLabel for a TestCase</div></div>
<pre><span class="VAL(&gt;:::)"><span class="keyword">val</span> (&gt;:::)</span> : <code class="type">string -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> list -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a></code></pre><div class="info"><div class="info">Create a TestLabel for a TestList</div></div>
<div class="info"><div class="info">Some shorthands which allows easy test construction.<p>   Examples:</p><p>   - <code class="code">&quot;test1&quot; &gt;: TestCase((fun _ -&gt; ()))</code> =&gt;
   <code class="code">TestLabel(&quot;test2&quot;, TestCase((fun _ -&gt; ())))</code></p><ul><li><code class="code">&quot;test2&quot; &gt;:: (fun _ -&gt; ())</code> =&gt;
   <code class="code">TestLabel(&quot;test2&quot;, TestCase((fun _ -&gt; ())))</code></li><li><code class="code">&quot;test-suite&quot; &gt;::: [&quot;test2&quot; &gt;:: (fun _ -&gt; ());]</code> =&gt;
   <code class="code">TestLabel(&quot;test-suite&quot;, TestSuite([TestLabel(&quot;test2&quot;,
                                       TestCase((fun _ -&gt; ())))]))</code>
</li></ul></div></div>
<pre><span class="VALtest_decorate"><span class="keyword">val</span> test_decorate</span> : <code class="type">(<a href="?package=ounit&amp;module=OUnit&amp;type=test_fun">test_fun</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test_fun">test_fun</a>) -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a></code></pre><div class="info"><div class="info"><code class="code">test_decorate g tst</code> Apply <code class="code">g</code> to test function contains in <code class="code">tst</code> tree. <b>Since</b> 1.0.3</div></div>
<pre><span class="VALtest_filter"><span class="keyword">val</span> test_filter</span> : <code class="type">?skip:bool -&gt; string list -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> option</code></pre><div class="info"><div class="info"><code class="code">test_filter paths tst</code> Filter test based on their path string
    representation. <b>Since</b> 1.0.3<div class="parameters"><div class="param_info"><code class="code">skip</code> : if set, just use <code class="code">skip_if</code> for the matching tests.</div></div></div></div>
<div class="info"><div class="info"><h2 id="2_TITLE">Retrieve Information from Tests</h2></div></div>
<pre><span class="VALtest_case_count"><span class="keyword">val</span> test_case_count</span> : <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; int</code></pre><div class="info"><div class="info">Returns the number of available test cases</div></div>
<pre><code><span class="TYPEnode"><span class="keyword">type</span> node</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTnode.ListItem"><span class="constructor">ListItem</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTnode.Label"><span class="constructor">Label</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td></tr></table><div class="info"><div class="info">Types which represent the path of a test</div></div>
<pre><span class="TYPEpath"><span class="keyword">type</span> path</span> = <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=node">node</a> list</code></pre><div class="info"><div class="info">The path to the test (in reverse order).</div></div>
<pre><span class="VALstring_of_node"><span class="keyword">val</span> string_of_node</span> : <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=node">node</a> -&gt; string</code></pre><div class="info"><div class="info">Make a string from a node</div></div>
<pre><span class="VALstring_of_path"><span class="keyword">val</span> string_of_path</span> : <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a> -&gt; string</code></pre><div class="info"><div class="info">Make a string from a path. The path will be reversed before it is
    tranlated into a string</div></div>
<pre><span class="VALtest_case_paths"><span class="keyword">val</span> test_case_paths</span> : <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a> list</code></pre><div class="info"><div class="info">Returns a list with paths of the test</div></div>
<div class="info"><div class="info"><h2 id="2_TITLE">Performing Tests</h2></div></div>
<pre><code><span class="TYPEtest_result"><span class="keyword">type</span> test_result</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_result.RSuccess"><span class="constructor">RSuccess</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a></code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_result.RFailure"><span class="constructor">RFailure</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a> * string</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_result.RError"><span class="constructor">RError</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a> * string</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_result.RSkip"><span class="constructor">RSkip</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a> * string</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_result.RTodo"><span class="constructor">RTodo</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a> * string</code></code></td></tr></table><div class="info"><div class="info">The possible results of a test</div><div class="info">Events which occur during a test run.</div></div>
<pre><code><span class="TYPEtest_event"><span class="keyword">type</span> test_event</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_event.EStart"><span class="constructor">EStart</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">A test start.</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_event.EEnd"><span class="constructor">EEnd</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=path">path</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">A test end.</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTtest_event.EResult"><span class="constructor">EResult</span></span> <span class="keyword">of</span> <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=test_result">test_result</a></code></code></td><td class="typefieldcomment" align="left"><div class="info">Result of a test.</div></td></tr></table>
<pre><span class="TYPEtest_results"><span class="keyword">type</span> test_results</span> = <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=test_result">test_result</a> list</code></pre><div class="info"><div class="info">Results of a test run.</div></div>
<pre><span class="VALperform_test"><span class="keyword">val</span> perform_test</span> : <code class="type">(<a href="?package=ounit&amp;module=OUnit&amp;type=test_event">test_event</a> -&gt; unit) -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test_results">test_results</a></code></pre><div class="info"><div class="info">Perform the test, allows you to build your own test runner</div></div>
<pre><span class="VALrun_test_tt"><span class="keyword">val</span> run_test_tt</span> : <code class="type">?verbose:bool -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test_results">test_results</a></code></pre><div class="info"><div class="info">A simple text based test runner.<div class="parameters"><div class="param_info"><code class="code">verbose</code> : print verbose message</div></div></div></div>
<pre><span class="VALrun_test_tt_main"><span class="keyword">val</span> run_test_tt_main</span> : <code class="type">?arg_specs:(<a href="?package=ocaml&amp;module=Arg&amp;type=key">Arg.key</a> * <a href="?package=ocaml&amp;module=Arg&amp;type=spec">Arg.spec</a> * <a href="?package=ocaml&amp;module=Arg&amp;type=doc">Arg.doc</a>) list -&gt;
?set_verbose:(bool -&gt; unit) -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit&amp;type=test_results">test_results</a></code></pre><div class="info"><div class="info">Main version of the text based test runner. It reads the supplied command
    line arguments to set the verbose level and limit the number of test to
    run.<div class="version">1.1.0</div><div class="parameters"><div class="param_info"><code class="code">arg_specs</code> : add extra command line arguments</div><div class="param_info"><code class="code">set_verbose</code> : call a function to set verbosity</div><div class="param_info"><code class="code">fexit</code> : call a final function after test, by default exit 1.</div></div></div></div>
<pre><span class="VALounit2_of_ounit1"><span class="keyword">val</span> ounit2_of_ounit1</span> : <code class="type"><a href="?package=ounit&amp;module=OUnit&amp;type=test">test</a> -&gt; <a href="?package=ounit&amp;module=OUnit2&amp;type=test">OUnit2.test</a></code></pre>
</div>